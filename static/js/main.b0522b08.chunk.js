(this["webpackJsonpmaplestory-music"]=this["webpackJsonpmaplestory-music"]||[]).push([[0],{128:function(e,t,n){"use strict";n.r(t);var a=n(21),r=n(0),i=n.n(r),c=n(19),o=n.n(c),l=(n(95),n(9)),u=n(2),s=n(10),d=(n(96),n(47)),b=n(12),h=n(16),f=n(20),m=n(147),p=n(146),g=n(71);function j(){var e=Object(l.a)(["\n        @media (min-width: 1024px) {\n          margin-right: 33vw;\n        }\n      "]);return j=function(){return e},e}var O,v=function(){return Object(u.b)("div",{children:[Object(u.b)("div",{css:Object(s.a)(j()),children:[Object(u.a)("h2",{children:"About"}),Object(u.a)("p",{children:"This database catalogs music from every region of MapleStory and aims to be the definitive resource for MapleStory music. It will be updated whenever new songs are added to the client of any region."}),Object(u.a)("h6",{children:Object(u.a)("b",{children:"Music Playback"})}),Object(u.a)("p",{children:"Music is played within an embedded YouTube player. The track is looped upon completion, unless in the shuffled playlist mode (see below)."}),Object(u.a)("h6",{children:Object(u.a)("b",{children:"Shuffled Playlist"})}),Object(u.a)("p",{children:"The shuffled playlist feature randomizes the entire music collection and plays upcoming songs automatically. Skip to the next track or return to the previous track with the controls under the media player. When filters are applied to the grid, the song pool is limited to the filtered entries."}),Object(u.a)("h6",{children:Object(u.a)("b",{children:"Grid Controls"})}),Object(u.a)("p",{children:"To sort by a column, press the column header. Hover over a column header and press the menu icon to access the advanced filter dialog. Mobile users can access the filter dialog by pressing and holding the column header."})]}),Object(u.a)("h2",{children:"Source"}),Object(u.a)("p",{children:"The following GitHub projects power this site."}),Object(u.b)("div",{className:"gh-project-entry",children:[Object(u.a)(g.a,{href:"https://github.com/maplestory-music/maplebgm-db","data-size":"large","data-show-count":!0,"aria-label":"Star maplestory-music/maplebgm-db on GitHub",children:"Star"}),Object(u.a)("h5",{className:"gh-project-name",children:"maplebgm-db: Definitive MapleStory music database"})]}),Object(u.b)("div",{className:"gh-project-entry",children:[Object(u.a)(g.a,{href:"https://github.com/maplestory-music/maplestory-music.github.io","data-size":"large","data-show-count":!0,"aria-label":"Star maplestory-music/maplestory-music.github.io on GitHub",children:"Star"}),Object(u.a)("h5",{className:"gh-project-name",children:"maplestory-music: MapleStory Music website"})]})]})},y=n(41),S=n(29),w=n(145),k=n(137),x=n(141),P=n(138),C=n(136),T=n(143),M=n(83),N=(n(106),n(107),n(148)),E=n(133),A=function(e){var t=document.createElement("span"),n=document.createElement("img");return n.src="mark/".concat(e.value,".png"),n.alt="icon",t.appendChild(n),t},D=function(e){var t=document.createElement("span");if(""===e.youtube)t.innerHTML=e.title;else{var n=document.createElement("a");n.href="https://youtu.be/".concat(e.youtube),n.rel="noopener noreferrer",n.target="_blank",n.onclick=function(t){f.a.event({category:"Video",action:"View External Video",label:e.youtube})},n.title="View on YouTube",n.className="ext-link";var a=document.createElement("i");a.className="fa fa-external-link",n.appendChild(a);var r=document.createElement("a");r.innerHTML=e.title,r.href="# ",r.rel="noopener noreferrer",r.onclick=function(t){f.a.event({category:"Video",action:"View Embedded Video",label:e.youtube}),e.onGridSongChange(e.youtube),t.preventDefault()},t.appendChild(n),t.appendChild(r)}return t},z=function(e){var t=document.createElement("div");t.className="date-col";var n=document.createElement("span"),a=e.value;if(!a)return t;var r=new Date,i=Object(N.a)(r,a)<3||Object(E.a)(a);if(n.innerHTML=e.valueFormatted,t.appendChild(n),i){n.className="recent-track";var c=document.createElement("i");c.className="fa fa-star",c.setAttribute("aria-hidden","true"),c.title="Recent Track",t.appendChild(c)}return t},F=n(134),G=i.a.createContext(void 0),R=function(e){var t=e.children,n=i.a.useState([]),c=Object(S.a)(n,2),o=c[0],l=c[1];return Object(r.useEffect)((function(){fetch("https://raw.githubusercontent.com/maplestory-music/maplebgm-db/prod/bgm.min.json").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){var t={client:e.source.client,date:e.source.date?Object(F.a)(e.source.date):null,structure:e.source.structure,version:e.source.version,clientVersion:e.source.client&&e.source.version?"".concat(e.source.client," ").concat(e.source.version):""};return Object.assign({},e,{source:t})}));l(t)}))}),[l]),Object(a.jsx)(G.Provider,{value:o,children:t})},V=function(){var e=i.a.useContext(G);if(!e)throw new Error("useDataSourceState must be used within a DataSourceProvider");return e},B=n(142);!function(e){e.Korea="KMS",e.Japan="JMS",e.China="CMS",e.Taiwan="TMS",e.SEA="MSEA",e.Global="GMS",e.Thailand="ThMS",e.Brazil="BMS"}(O||(O={}));var H=n(45),L="#6495ed";function W(){var e=Object(l.a)(["\n        margin: auto;\n        width: 95vw;\n        margin-bottom: 15px;\n      "]);return W=function(){return e},e}var Y=function(e){var t=e.query,n=e.onGridSongChange,a=e.setShufflePool,i=V(),c=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)([]),d=Object(r.useRef)(void 0);l.current=function(e){return[{headerName:"",field:"mark",minWidth:70,maxWidth:70,resizable:!1,cellRenderer:A,getQuickFilterText:function(){return""}},{headerName:"Title",field:"metadata.title",minWidth:250,cellRenderer:D,cellRendererParams:function(t){return{title:t.value,youtube:t.data.youtube,onGridSongChange:e}}},{headerName:"Description",minWidth:375,field:"description"},{headerName:"Folder",field:"source.structure",getQuickFilterText:function(){return""}},{headerName:"Date",field:"source.date",filter:"agDateColumnFilter",sort:"desc",valueFormatter:function(e){return e.data.source.date?Object(B.a)(e.data.source.date,"yyyy-MM-dd"):""},cellRenderer:z,getQuickFilterText:function(){return""}},{headerName:"Client",field:"source.clientVersion",getQuickFilterText:function(){return""},cellStyle:function(e){if(!e.value)return{};var t=Object(H.b)(L,.5);return{backgroundColor:e.value.startsWith(O.Korea)?t:Object(H.a)(t)}}}]}(n),d.current={animateRows:!0,pagination:!0,paginationPageSize:25,suppressColumnVirtualisation:!0,suppressMovableColumns:!0,rowHeight:45,defaultColDef:{sortable:!0,filter:!0,resizable:!0},domLayout:"autoHeight"},Object(r.useEffect)((function(){var e;null===(e=c.current)||void 0===e||e.setQuickFilter(t)}),[t]);return Object(u.a)("div",{css:Object(s.a)(W()),className:"ag-theme-balham",children:Object(u.a)(M.AgGridReact,{columnDefs:l.current,rowData:i,gridOptions:d.current,onFirstDataRendered:function(e){e.columnApi.autoSizeAllColumns(),a(!1,i)},onFilterChanged:function(e){if(e.api.isAnyFilterPresent()){var t=[];e.api.forEachNodeAfterFilter((function(e,n){t.push(e.data)})),a(!0,t)}else a(!1,i)},onModelUpdated:function(e){e.api.getDisplayedRowCount()>0?e.api.hideOverlay():e.api.showNoRowsOverlay()},onGridReady:function(e){c.current=e.api,o.current=e.columnApi}})})},J=n(84),K=n.n(J),Q=n(144),I=n(135);function U(){var e=Object(l.a)(["\n                background-color: #343a40;\n                border-color: #343a40;\n                color: white;\n                padding: 0.25rem 0.5rem;\n                font-size: 0.875rem;\n                line-height: 1.5;\n                border: 1px solid transparent;\n                margin-left: -1px;\n              "]);return U=function(){return e},e}function q(){var e=Object(l.a)(["\n            margin-top: 5px;\n          "]);return q=function(){return e},e}function $(){var e=Object(l.a)(["\n          display: block;\n          margin-left: auto;\n          margin-right: auto;\n          max-width: 100vw;\n        "]);return $=function(){return e},e}var _=function(e){var t=Object(r.useRef)(null),n=e.playingState,a=e.setCurrentPlaylistSong;return Object(u.b)("div",{children:[Object(u.a)(K.a,{css:Object(s.a)($()),ref:t,url:"https://youtu.be/".concat(n.currentSong),playing:!0,controls:!0,onEnded:function(){if(null!==t.current)if(n.shufflePlaylist.length){if(f.a.event({category:"Video",action:"Complete Playlist Video",label:n.currentSong}),n.currentPlaylistSong===n.shufflePlaylist.length-1)return;var e=n.currentPlaylistSong+1;a(e)}else t.current.seekTo(0),f.a.event({category:"Video",action:"Loop Embedded Video",label:n.currentSong})}}),n.shufflePlaylist.length>0&&Object(u.a)("div",{className:"text-center",css:Object(s.a)(q()),children:Object(u.b)(I.a,{size:"sm",children:[Object(u.a)(C.a,{variant:"outline-primary",onClick:function(){n.currentPlaylistSong<1||a(n.currentPlaylistSong-1)},disabled:0===n.currentPlaylistSong,children:Object(u.a)("i",{className:"fa fa-step-backward"})}),Object(u.a)("span",{css:Object(s.a)(U()),children:"".concat(Object(Q.a)((n.currentPlaylistSong+1).toString(),n.shufflePlaylist.length.toString().length,"0")," | ").concat(n.shufflePlaylist.length)}),Object(u.a)(C.a,{variant:"outline-primary",onClick:function(){n.currentPlaylistSong!==n.shufflePlaylist.length-1&&a(n.currentPlaylistSong+1)},disabled:n.currentPlaylistSong+1===n.shufflePlaylist.length,children:Object(u.a)("i",{className:"fa fa-step-forward"})})]})})]})};function X(){var e=Object(l.a)(["\n            display: block;\n            margin-left: auto;\n            margin-right: auto;\n            margin-bottom: 10px;\n          "]);return X=function(){return e},e}var Z=function(){return Object(u.b)(r.Fragment,{children:[Object(u.a)("div",{children:Object(u.a)("img",{css:Object(s.a)(X()),id:"header-logo",src:"assets/pink-bean.png",alt:"header logo"})}),Object(u.a)("div",{children:Object(u.a)("p",{children:"Welcome to the MapleStory Music database. This site provides a complete listing of the background music (BGM) used in MapleStory. Collectively, the songs are also known as MapleStory's original soundtrack (OST)."})})]})};function ee(){var e=Object(l.a)(["\n          margin: 10px 14vw;\n        "]);return ee=function(){return e},e}var te=function(){var e=Object(r.useState)(),t=Object(S.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),c=Object(S.a)(i,2),o=c[0],l=c[1],d=Object(r.useState)({currentSong:void 0,shufflePlaylist:[],currentPlaylistSong:-1}),b=Object(S.a)(d,2),h=b[0],m=b[1],p=Object(r.useRef)([]);return Object(u.b)("div",{children:[void 0===h.currentSong?Object(u.a)(Z,{}):Object(u.a)(_,{playingState:h,setCurrentPlaylistSong:function(e){m((function(t){return Object(y.a)(Object(y.a)({},t),{},{currentSong:t.shufflePlaylist[e].youtube,currentPlaylistSong:e})}))}}),Object(u.a)(w.a.Group,{css:Object(s.a)(ee()),className:"filter-text",children:Object(u.b)(k.a,{size:"lg",children:[Object(u.a)(k.a.Prepend,{children:Object(u.a)(k.a.Text,{children:Object(u.a)("i",{className:"fa fa-search"})})}),Object(u.a)(w.a.Control,{type:"search",placeholder:"Song title or keyword",onChange:function(e){a(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&document.activeElement&&document.activeElement.blur()}}),Object(u.a)(k.a.Append,{children:Object(u.a)(x.a,{delay:{show:250,hide:100},overlay:Object(u.a)(P.a,{id:"tooltip-start-playlist",children:o?"Start Shuffled Playlist (Filtered)":"Start Shuffled Playlist"}),children:Object(u.a)(C.a,{variant:o?"outline-warning":"outline-success",onClick:function(){var e=Object(T.a)(p.current.filter((function(e){return""!==e.youtube})));e.length&&(m({currentSong:e[0].youtube,shufflePlaylist:e,currentPlaylistSong:0}),f.a.event({category:"Playlist",action:o?"Start Shuffled Playlist (Filtered)":"Start Shuffled Playlist",label:"Shuffle Button"}))},children:Object(u.a)("i",{className:"fa fa-random"})})})})]})}),Object(u.a)(Y,{query:n,onGridSongChange:function(e){m({currentSong:e,shufflePlaylist:[],currentPlaylistSong:-1})},setShufflePool:function(e,t){l(e),p.current=t}})]})},ne=n(140),ae=n(139),re=n(67),ie=n.n(re),ce=n(88),oe=n.n(ce);function le(){var e=Object(l.a)(["\n          display: inline-block;\n          margin: 10px;\n          @media (max-width: 1024px) {\n            width: 100%;\n          }\n        "]);return le=function(){return e},e}var ue=function(e){return Object(u.a)("div",{css:[Object(s.a)(le()),e.styles],children:Object(u.a)(oe.a,{containerProps:{className:"react-highcharts-container",style:{width:"100%",height:"100%"}},highcharts:ie.a,options:e.options})})};function se(){var e=Object(l.a)(["\n        width: 60%;\n      "]);return se=function(){return e},e}var de=function(e){var t=V(),n=e.selectedYear,a=t.reduce((function(e,t){return t.metadata.year===n.toString()&&t.source.date&&e[Object(ae.a)(t.source.date)]++,e}),new Array(12).fill(0)),r={chart:{type:"line"},title:{text:"Song frequency per month"},xAxis:{type:"datetime"},yAxis:{title:{text:"Songs"}},series:[{name:"Songs",type:"line",pointStart:Date.UTC(n,0,1),pointIntervalUnit:"month",data:a}]};return Object(u.a)(ue,{styles:Object(s.a)(se()),options:r})};function be(){var e=Object(l.a)(["\n        width: 35%;\n      "]);return be=function(){return e},e}var he=function(e){var t=V(),n=e.selectedYear,a=t.filter((function(e){var t;return(null===(t=e.source.date)||void 0===t?void 0:t.getFullYear())===n&&e.source.client})),r=function(e){return a.filter((function(t){var n;return null===(n=t.source.client)||void 0===n?void 0:n.includes(e)})).length},i=r(O.Korea),c=a.length-i,o={chart:{type:"pie"},title:{text:"Distribution of song region"},series:[{id:"domesticVsOverseas",name:"Total Songs",type:"pie",data:[{name:"Domestic",color:L,y:i},{name:"Overseas",color:Object(H.a)(L),y:c}],size:"70%",dataLabels:{enabled:!1}},{id:"regional",name:"Songs",type:"pie",data:[{name:"Korea",color:L,y:i},{name:"Japan",y:r(O.Japan)},{name:"China",y:r(O.China)},{name:"Taiwan",y:r(O.Taiwan)},{name:"Thailand",y:r(O.Thailand)},{name:"SEA",y:r(O.SEA)},{name:"Global",y:r(O.Global)},{name:"Brazil",y:r(O.Brazil)}],size:"100%",innerSize:"70%",dataLabels:{formatter:function(e){if(this.y)return this.key}}}]};return Object(u.a)(ue,{styles:Object(s.a)(be()),options:o})};function fe(){var e=Object(l.a)(["\n              width: 100px;\n            "]);return fe=function(){return e},e}var me=function(){var e=Object(ne.a)(new Date),t=Object(r.useState)(e),n=Object(S.a)(t,2),a=n[0],i=n[1],c=Array(Object(ne.a)(new Date)-2003+1).fill(0).map((function(e,t){return 2003+t}));return Object(u.b)("div",{children:[Object(u.a)("h2",{children:"Stats"}),Object(u.a)(w.a,{children:Object(u.a)(w.a.Group,{controlId:"year-select",children:Object(u.a)(w.a.Control,{css:Object(s.a)(fe()),as:"select",custom:!0,defaultValue:e,onChange:function(e){e.target.value&&i(+e.target.value)},children:c.map((function(e){return Object(u.a)("option",{value:e,children:e},e)}))})})}),Object(u.b)("div",{children:[Object(u.a)(de,{selectedYear:a}),Object(u.a)(he,{selectedYear:a})]})]})};function pe(){var e=Object(l.a)(["\n      margin: 2% 3% 3% 3%;\n    "]);return pe=function(){return e},e}function ge(){var e=Object(l.a)(["\n      margin: 2% 3% 3% 3%;\n    "]);return ge=function(){return e},e}function je(){var e=Object(l.a)(["\n        text-align: center;\n        margin-bottom: 10px;\n      "]);return je=function(){return e},e}function Oe(){var e=Object(l.a)(["\n          margin-right: 8px;\n        "]);return Oe=function(){return e},e}function ve(){var e=Object(l.a)(["\n      margin-bottom: 10px;\n    "]);return ve=function(){return e},e}f.a.initialize("UA-53945508-5");var ye=Object(h.a)();ye.listen((function(e,t){f.a.pageview(window.location.pathname)})),f.a.pageview(window.location.pathname);var Se=function(e){e.currentTarget.pathname===window.location.pathname&&e.preventDefault()},we=function(){return Object(u.b)(m.a,{css:Object(s.a)(ve()),bg:"dark",variant:"dark",expand:"lg",children:[Object(u.b)(m.a.Brand,{as:d.a,to:"/",onClick:Se,children:[Object(u.a)("img",{css:Object(s.a)(Oe()),alt:"",src:"./assets/pb-logo.svg",width:"30",height:"30",className:"d-inline-block align-top"})," ","MapleStory Music"]}),Object(u.a)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.a)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(u.b)(p.a,{className:"mr-auto",children:[Object(u.a)(p.a.Link,{as:d.b,exact:!0,to:"/",onClick:Se,children:"Home"}),Object(u.a)(p.a.Link,{as:d.b,exact:!0,to:"/stats",onClick:Se,children:"Stats"}),Object(u.a)(p.a.Link,{as:d.b,exact:!0,to:"/about",onClick:Se,children:"About"})]})})]})},ke=function(){var e,t=null!==(e="6037d86")?e:"Dev";return Object(u.a)("div",{css:Object(s.a)(je()),className:"footer",children:Object(u.a)("span",{children:"Build: ".concat(t)})})},xe=function(){return Object(u.a)("main",{children:Object(u.b)(b.c,{children:[Object(u.a)(b.a,{exact:!0,path:"/",component:Pe}),Object(u.a)(b.a,{path:"/stats",component:Te}),Object(u.a)(b.a,{path:"/about",component:Ce})]})})},Pe=function(){return Object(u.a)("div",{className:"App",children:Object(u.a)(te,{})})},Ce=function(){return Object(u.a)("div",{css:Object(s.a)(ge()),className:"About",children:Object(u.a)(v,{})})},Te=function(){return Object(u.a)("div",{css:Object(s.a)(pe()),className:"Stats",children:Object(u.a)(me,{})})},Me=function(){return Object(u.a)(R,{children:Object(u.a)(b.b,{history:ye,children:Object(u.b)("div",{children:[Object(u.a)(we,{}),Object(u.a)(xe,{}),Object(u.a)(ke,{})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Me,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,n){},96:function(e,t,n){}},[[128,1,2]]]);